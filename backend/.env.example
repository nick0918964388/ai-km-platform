# =============================================================================
# AI KM Platform - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values.
# For production, ensure sensitive keys are stored securely.
# =============================================================================

# -----------------------------------------------------------------------------
# OpenAI Configuration (Required)
# -----------------------------------------------------------------------------
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your-openai-api-key-here

# Chat model for RAG responses (default: gpt-4o)
OPENAI_MODEL=gpt-4o

# -----------------------------------------------------------------------------
# Embedding Models
# -----------------------------------------------------------------------------
# Text embedding model (sentence-transformers)
TEXT_EMBEDDING_MODEL=all-MiniLM-L6-v2

# CLIP model for multimodal (image) embeddings
CLIP_MODEL=openai/clip-vit-base-patch32

# Jina API key for image embeddings (optional, uses local CLIP if not set)
# Get your API key from: https://jina.ai/
JINA_API_KEY=

# -----------------------------------------------------------------------------
# PostgreSQL Database (Structured Data)
# -----------------------------------------------------------------------------
# PostgreSQL connection URL for structured data (vehicles, faults, maintenance)
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://aikm:aikm@localhost:5433/aikm

# Enable SQL query logging (development only)
DB_ECHO=false

# -----------------------------------------------------------------------------
# Qdrant Vector Database (Persistent Storage)
# -----------------------------------------------------------------------------
# URL for Qdrant server (docker-compose default: http://localhost:6333)
# Set to empty string or ":memory:" for in-memory mode (development only)
QDRANT_URL=http://localhost:6333

# Optional: Qdrant API key for authentication (if using Qdrant Cloud)
QDRANT_API_KEY=

# -----------------------------------------------------------------------------
# Redis Cache (Query Caching)
# -----------------------------------------------------------------------------
# Redis connection URL (docker-compose default: redis://localhost:6379)
# Leave empty to disable caching
REDIS_URL=redis://localhost:6379

# Cache TTL in seconds (default: 3600 = 1 hour)
# Set to 0 to disable caching
CACHE_TTL=3600

# -----------------------------------------------------------------------------
# Cohere Reranker (Search Quality Enhancement)
# -----------------------------------------------------------------------------
# Get your API key from: https://dashboard.cohere.com/api-keys
# Leave empty to disable reranking (will use RRF fusion only)
COHERE_API_KEY=your-cohere-api-key-here

# Rerank model (default: rerank-v3.5)
# Options: rerank-v3.5, rerank-english-v3.0, rerank-multilingual-v3.0
COHERE_MODEL=rerank-v3.5

# Number of top results to return from reranker (default: 10)
RERANK_TOP_N=10

# -----------------------------------------------------------------------------
# Backup Configuration
# -----------------------------------------------------------------------------
# Directory for storing Qdrant snapshots (relative to project root)
BACKUP_DIR=./backups

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Allowed origins for CORS (comma-separated)
# Example: http://localhost:3000,https://yourdomain.com
CORS_ORIGINS=http://localhost:3000

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# Host and port for the backend server
HOST=0.0.0.0
PORT=8000

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO
